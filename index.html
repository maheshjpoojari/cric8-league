<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cric-8 League Legacy</title>
    <style>
        body { font-family: -apple-system, system-ui, sans-serif; background: #0f172a; color: white; text-align: center; margin: 0; padding: 10px; }
        .hidden { display: none !important; }
        .setup-screen, .game-screen, .history-screen { max-width: 500px; margin: auto; }
        input { padding: 12px; margin: 5px; width: 85%; border-radius: 8px; border: 1px solid #334155; background: #1e293b; color: white; }
        .score-box { background: #1e293b; padding: 15px; border-radius: 20px; margin: 10px 0; border: 1px solid #334155; position: relative; }
        #totalScore { font-size: 4rem; font-weight: 800; margin: 5px 0; color: #38bdf8; }
        .last-over-active { border: 3px solid #f87171 !important; background: #450a0a !important; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(248,113,113,0.7); } 70% { box-shadow: 0 0 0 15px rgba(248,113,113,0); } 100% { box-shadow: 0 0 0 0 rgba(248,113,113,0); } }
        .target-bar { background: #064e3b; color: #34d399; padding: 8px; border-radius: 10px; margin-bottom: 10px; font-weight: bold; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
        button { padding: 15px; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .run-btn { background: #334155; color: white; }
        .wicket-btn { background: #ef4444; color: white; grid-column: span 3; }
        .extra-btn { background: #f59e0b; color: #000; }
        table { width: 100%; margin-top: 15px; border-collapse: collapse; font-size: 0.8rem; background: #1e293b; border-radius: 10px; overflow: hidden; }
        th, td { border: 1px solid #334155; padding: 8px; }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 100; padding: 20px; }
    </style>
</head>
<body>

    <div id="selectionOverlay" class="overlay hidden">
        <h3 id="selectionTitle" style="color: #38bdf8;">Select Player</h3>
        <div id="selectionList" class="grid" style="width: 100%;"></div>
    </div>

    <div id="inningsOverlay" class="overlay hidden">
        <h2 id="inningsMsg">Innings Over!</h2>
        <h1 id="inningsScoreDisplay">Score: 0</h1>
        <button id="nextInningsBtn" onclick="startSecondInnings()" style="background:#38bdf8; color:#000; width:80%; height:60px;">START 2ND INNINGS</button>
    </div>

    <div id="setupScreen" class="setup-screen">
        <h2 style="color: #38bdf8;">Cric-8 League Engine_2</h2>
        <input type="text" id="team1Name" placeholder="Team 1 Name">
        <input type="text" id="team2Name" placeholder="Team 2 Name">
        <p>Enter 10 Players per Team</p>
        <div style="display: flex; justify-content: space-around;">
            <div id="t1Inputs" style="width:48%"><strong>Team 1</strong></div>
            <div id="t2Inputs" style="width:48%"><strong>Team 2</strong></div>
        </div>
        <button style="background:#10b981; color:white; width:90%; margin-top:15px; height:55px;" onclick="startGame()">START MATCH</button>
        <button style="background:#334155; color:white; width:90%; margin-top:10px;" onclick="toggleHistory(true)">üèÜ LEADERBOARD</button>
    </div>

    <div id="gameScreen" class="game-screen hidden">
        <div id="targetBar" class="target-bar hidden">TARGET: <span id="targetDisplay">0</span> | NEED: <span id="needDisplay">0</span></div>
        <div class="match-header">
            <div id="battingTeamDisp" style="color:#38bdf8; font-weight:bold; font-size:1.2rem;"></div>
            <div style="display:flex; justify-content:space-around; margin-top:10px;">
                <div id="s1Disp" onclick="setStriker(0)">-</div>
                <div id="s2Disp" onclick="setStriker(1)">-</div>
            </div>
            <div style="margin-top:5px; font-size:0.8rem;">Bowler: <span id="currentBowlerName" style="color:#38bdf8;">-</span></div>
        </div>

        <div class="score-box">
            <div id="totalScore">0</div>
            <div style="font-weight:bold; opacity:0.8;">Overs: <span id="ovDisp">0.0</span>/8.0 | Wkts: <span id="wkDisp">0</span></div>
            <div id="dotDisp" style="margin-top:5px;">‚ö™ ‚ö™ ‚ö™</div>
        </div>

        <div class="grid">
            <button class="run-btn" onclick="addBall('RUN', 0)">0</button>
            <button class="run-btn" onclick="addBall('RUN', 1)">1</button>
            <button class="run-btn" onclick="addBall('RUN', 2)">2</button>
            <button class="run-btn" onclick="addBall('RUN', 3)">3</button>
            <button class="run-btn" onclick="addBall('RUN', 4)">4</button>
            <button class="run-btn" onclick="addBall('RUN', 6)">6</button>
            <button class="extra-btn" onclick="addBall('WIDE')">WIDE+2</button>
            <button class="extra-btn" onclick="addBall('NOBALL')">NB+2</button>
            <button class="wicket-btn" onclick="addBall('WICKET')">WICKET/RUN-OUT (-5)</button>
